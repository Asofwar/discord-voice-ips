# Что это и зачем?

Этот репозиторий содержит:
- Списки доменов и IP-адресов используемых голосовыми серверами Discord и в целом (_gui, api и т.д._)
- Скрипт для парсинга IP с готового списка сабдоменов голосовых каналов и создания IPset списка с последующей загрузкой получившихся IP списков
- Скрипты для генерации списка сабдоменов голосовых серверов в формате **region[1-15000].discord.gg** и их резолв с последующей записью в фолдер **regions**
- Скрипт для преобразования списков IP-адресов в JSON формат для удобного импорта в **Amnezia**

Репозиторий будет полезен тем, кто хочет настроить **"корректную"** маршрутизацию для обеспечения **"стабильной"** работы Discord.

## Структура Репозитория

- `main-domains-resolver.sh` - IP резолвер по списку `discord-main-domains-list`, вывод сохраняется в фолдер `main_domains`
- `voice-domains-generator.sh` - генератор и резолвер доменов голосовых серверов Discord (_шустрый, но зависит от CPU_) 
- `json-voice-ip-converter.sh` - скрипт преобразовывает в JSON списки IP голосовых серверов Discord для последующего ручного импорта в **Amnezia**
- `ipset-adder.sh` - скрипт генерирует ipset списки из содержимого фолдеров `voice_domains` и `main_domains`, ипортирует их в заданный IPset при этом учитывая уже добавленные в него IP и т.д.
- `amnezia` - фолдер со списками доменов и IP в формате JSON для настройки раздельного туннелирования в Amnezia
- `regions` - фолдер со списками IP голосовых каналов разбитых по регионам (_сгенерированный силами `voice-domains-generator`_)
- `main_domains` - фолдер со списками основных доменов и IP 
- `voice_domains` - фолдер со списками голосовых доменов и IP 
- `custom-solutions` - фолдер с решениями от **заинтересованных** и **неравнодушных**

# ДОКА НИЖЕ ВРЕМЕННО НЕАКТУАЛЬНА

## Скрипт `json-voice-ip-converter`

- **Запускать** его нужно после того как отработает генератор (_чтобы конвертировать актуальные списки_)
- Результат работы автоматически запишется в каждый фолдер региона в формате **amnezia-`region`-voice-ip.json**
- В корень репо также запишется общий список всех регионов в формате **amnezia-voice-ip.json**

### Пример работы скрипта `json-voice-ip-converter`:

```bash
$ ./json-voice-ip-converter.sh
Конвертируем в JSON: bucharest
Конвертируем в JSON: dubai
Конвертируем в JSON: finland
Конвертируем в JSON: frankfurt
Конвертируем в JSON: madrid
Конвертируем в JSON: milan
Конвертируем в JSON: rotterdam
Конвертируем в JSON: russia
Конвертируем в JSON: singapore
Конвертируем в JSON: stockholm
Конвертируем в JSON: warsaw
Содержимое всех списков записано в amnezia-voice-ip.json.
```

### Короткий мануал по работе с **Amnezia**

- Стянуть [репу](https://github.com/GhostRooter0953/discord-voice-ips/tree/master)
- Включить раздельное туннелирование в **Amnezia**, в селекторе выбрать **"Только адреса из списка должны открываться через VPN"**
- Импортировать список с [общими доменами](https://github.com/GhostRooter0953/discord-voice-ips/blob/master/amnezia-discord-domains.json)
- Импортировать (_без замены_) список с [голосовыми каналами](https://github.com/GhostRooter0953/discord-voice-ips/blob/master/amnezia-voice-ip.json) (_также можно взять и конкретный [регион](https://github.com/GhostRooter0953/discord-voice-ips/tree/master/regions)_)
- Подключиться к **Amnezia** и проверить работу Discord

## To Do

- Сканер и резолвер сабдоменов, т.к. периодчески возникают подобные [сиутации](https://github.com/GhostRooter0953/discord-voice-ips/issues/1#issuecomment-2408466714)
- Механизм автоматической актуализации списков в репозитории
- Всяческие мануалы
---
